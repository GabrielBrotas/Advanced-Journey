
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="My learning related to Architecture" name="description"/>
<meta content="Gabriel Brotas" name="author"/>
<link href="https://gabrielbrotas.github.io/Advanced-Journey/microservices/" rel="canonical"/>
<link href="../domain-driven-design/" rel="prev"/>
<link href="../Kafka/" rel="next"/>
<link href="../images/volcano.svg" rel="icon"/>
<meta content="mkdocs-1.4.2, mkdocs-material-9.1.7" name="generator"/>
<title>Microservices - Advanced Journey</title>
<link href="../assets/stylesheets/main.ded33207.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.a0c5b2b5.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src="../assets/javascripts/glightbox.min.js"></script></head>
<body data-md-color-accent="red" data-md-color-primary="black" data-md-color-scheme="purple" dir="ltr">
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#microservices">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Advanced Journey" class="md-header__button md-logo" data-md-component="logo" href=".." title="Advanced Journey">
<img alt="logo" src="../images/volcano.svg"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Advanced Journey
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Microservices
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-hidden="true" class="md-option" data-md-color-accent="red" data-md-color-media="" data-md-color-primary="black" data-md-color-scheme="purple" id="__palette_1" name="__palette" type="radio"/>
</form>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/GabrielBrotas/Advanced-Journey" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Advanced Journey" class="md-nav__button md-logo" data-md-component="logo" href=".." title="Advanced Journey">
<img alt="logo" src="../images/volcano.svg"/>
</a>
    Advanced Journey
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/GabrielBrotas/Advanced-Journey" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
        Home
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Architecture
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          Architecture
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../Architecture/types-of-architecture/">
        Types of Architecture
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Architecture/sustainability/">
        Sustainability
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Architecture/architectural-features/">
        Architectural Features
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Architecture/design-quality-software/">
        Design Quality Software
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Systems Communication
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          Systems Communication
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../SystemsCommunication/">
        Systems Communication
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../SystemsCommunication/REST/">
        REST
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../SystemsCommunication/gRPC/">
        gRPC
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../SystemsCommunication/GraphQL/">
        GraphQL
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          SOLID
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          SOLID
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../SOLID/">
        SOLID
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../SOLID/single-responsability/">
        Single Responsibility Principle
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../SOLID/open-closed/">
        Open-closed Principle
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../SOLID/liskov-substitution/">
        Liskov Substitution Principle
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../SOLID/interface-segregation/">
        Interface Segregation Principle
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../SOLID/dependency-inversion/">
        Dependency Inversion Principle
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../domain-driven-design/">
        Domain Driven Design
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          Microservices
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        Microservices
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#differences-between-microservice-and-monolith">
    Differences between Microservice and Monolith
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#when-to-use">
    When to use
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#migration">
    Migration
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#resiliency">
    Resiliency
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#choreography-vs-orchestration">
    Choreography vs Orchestration
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#durs-principle">
    DURS Principle
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#failure-isolation">
    Failure Isolation
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          Kafka
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
          Kafka
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../Kafka/">
        Apache Kafka
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Kafka/topics/">
        Topics
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Kafka/producers-and-consumers/">
        Producers and Consumers
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Kafka/kafka-connect/">
        Kafka Connect
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Kafka/avro/">
        Avro
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../rabbitmq/">
        RabbitMQ
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../kubernetes/">
        Kubernetes
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
          Observability
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_10_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_10">
<span class="md-nav__icon md-icon"></span>
          Observability
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../Observability/">
        Observability
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Observability/service-level/">
        Service Level
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Observability/open-telemetry/">
        OpenTelemetry
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Observability/elastic-stack/">
        Elastic Stack
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_11" type="checkbox"/>
<label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
          Computer Science
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_11_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_11">
<span class="md-nav__icon md-icon"></span>
          Computer Science
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../Computer-Science/core-thread-process/">
        Program, Process and Thread
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Computer-Science/OOP-vs-Functional-Programming/">
        Object-Oriented-Programming vs Functional Programming
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Computer-Science/https-tls-mtls/">
        HTTPS, TLS and mTLS
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Computer-Science/reactive-programming-vs-reactive-systems/">
        Reactive Programming vs Reactive Systems
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../GitOps/">
        GitOps
      </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#differences-between-microservice-and-monolith">
    Differences between Microservice and Monolith
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#when-to-use">
    When to use
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#migration">
    Migration
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#resiliency">
    Resiliency
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#choreography-vs-orchestration">
    Choreography vs Orchestration
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#durs-principle">
    DURS Principle
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#failure-isolation">
    Failure Isolation
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="microservices">Microservices<a class="headerlink" href="#microservices" title="Permanent link">¶</a></h1>
<h2 id="differences-between-microservice-and-monolith"><strong>Differences between Microservice and Monolith</strong><a class="headerlink" href="#differences-between-microservice-and-monolith" title="Permanent link">¶</a></h2>
<p>Microservices are ordinary applications, there isn't any difference from any other application.</p>
<p>The main difference are the goals, microservices has a well defined goal/domain and a monolith has all the ecosystem/responsability on the same system.</p>
<p>Microservices are part of an ecosystem, it isn't an isolated application, usually are part of a bigger context.</p>
<p>They are independent and communicate all the time directly or indirectly. </p>
<p>Another big difference is the deployment process, microservices has less risk because the process is more independent.</p>
<p>Another difference is the team organization, we can have one team per microservice</p>
<h2 id="when-to-use"><strong>When to use</strong><a class="headerlink" href="#when-to-use" title="Permanent link">¶</a></h2>
<p>Monolith</p>
<ul>
<li>Start of a project</li>
<li>POC - Proof of Concept</li>
<li>When you don't understand the domains</li>
<li>Ensure technology governance</li>
<li>Easier to understand the code flow</li>
<li>Everything on the same spot</li>
</ul>
<p>Microservice</p>
<ul>
<li>Scale teams</li>
<li>Well defined contexts / business rules/area</li>
<li>Maturity in the delivery process</li>
<li>Technical Maturity</li>
<li>When you have the necessity of scale just one part of the system</li>
<li>When you need different technologies</li>
</ul>
<h2 id="migration"><strong>Migration</strong><a class="headerlink" href="#migration" title="Permanent link">¶</a></h2>
<ul>
<li>Context separation;</li>
<li>Avoid excess granularity;</li>
<li>Verify dependencies to avoid distributed monolith;</li>
<li>Migrate databases;</li>
<li>Think in events;</li>
<li>Eventual consistency;</li>
<li>CI/CD/Tests/Environments;</li>
<li>Start from the edges, parts of the system that doesn't affect the main domain;</li>
</ul>
<h2 id="resiliency"><strong>Resiliency</strong><a class="headerlink" href="#resiliency" title="Permanent link">¶</a></h2>
<ul>
<li>Health Check</li>
<li>Rate Limiting</li>
<li>Circuit breaker</li>
<li>API Gateway</li>
<li>Service Mesh</li>
<li>Retry</li>
<li>
<p>Transactional Outbox</p>
<p>Temporary table, is a local queue;</p>
<p>First we save the message on this table and then we send the message to kafka, if the message was sent successfully we delete the message from the Outbox table, but, if some error happen to send the message to kafka we know that it'll be secure in our db</p>
</li>
<li>
<p>Fallback policies</p>
</li>
<li>Observability</li>
<li>Idempotency - deal with duplicated messages</li>
</ul>
<p><strong>Complex Situations:</strong></p>
<ul>
<li>What if the message broker goes down? how the system should behave?</li>
<li>It will have message loss?</li>
</ul>
<p>Exponential backoff and Jitter: <a href="https://aws.amazon.com/pt/blogs/architecture/exponential-backoff-and-jitter/">https://aws.amazon.com/pt/blogs/architecture/exponential-backoff-and-jitter/</a></p>
<p>OTEL - <a href="https://opentelemetry.io/">https://opentelemetry.io/</a></p>
<h2 id="choreography-vs-orchestration"><strong>Choreography vs Orchestration</strong><a class="headerlink" href="#choreography-vs-orchestration" title="Permanent link">¶</a></h2>
<p>A choreographed system uses by definition event-driven communication, whereas microservice orchestration uses command-driven communication. An event is something which happened in the past and is a fact. The sender does not know who picks up the event or what happens next. An example can be the event “Credit checked.”</p>
<p><strong>Choreography</strong></p>
<p>All microservices talks to each other, there isn't a master service to orchestrate the communication, if service A needs something from service C it will talk directly.</p>
<ul>
<li><strong>Loose coupling:</strong> Choreography allows microservices to be loosely coupled, which means they can operate independently and asynchronously without depending on a central coordinator. This can make the system more scalable and resilient, as the failure of one microservice will not necessarily affect the other microservices.</li>
<li><strong>Ease of maintenance:</strong> Choreography allows microservices to be developed and maintained independently, which can make it easier to update and evolve the system.</li>
<li><strong>Decentralized control:</strong> Choreography allows control to be decentralized, which can make the system more resilient and less prone to failure.</li>
<li><strong>Asynchronous communication:</strong> Choreography allows microservices to communicate asynchronously, which can be more efficient and scalable than synchronous communication.</li>
</ul>
<p><strong>Orchestration</strong></p>
<p>Has a "maestro" that control the moment where each step/service will execute.</p>
<p>When talking about orchestration you can picture a big orchestra which features multiple instruments and a conductor who makes sure that everyone stays in tact. He tells when which instrument needs to play to ensure that the song sounds as it should like.</p>
<ul>
<li><strong>Simplicity:</strong> Orchestration can be simpler to implement and maintain than choreography, as it relies on a central coordinator to manage and coordinate the interactions between the microservices.</li>
<li><strong>Centralized control:</strong> With a central coordinator, it is easier to monitor and manage the interactions between the microservices in an orchestrated system.</li>
<li><strong>Visibility:</strong> Orchestration allows for a holistic view of the system, as the central coordinator has visibility into all of the interactions between the microservices.</li>
<li><strong>Ease of troubleshooting:</strong> With a central coordinator, it is easier to troubleshoot issues in an orchestrated system.</li>
</ul>
<h2 id="durs-principle"><strong>DURS Principle</strong><a class="headerlink" href="#durs-principle" title="Permanent link">¶</a></h2>
<p>Each service can be independently DURS (deployed, updated, replaced, and scaled)</p>
<ul>
<li><em>Microservice</em></li>
<li><em>Domain-Driven Design</em></li>
<li><em>Failure Isolation</em></li>
<li><em>Continuous Delivery</em></li>
<li><em>Decentralization</em></li>
<li><em>DevOps</em></li>
<li><em>Scalability</em></li>
<li><em>Resilience</em></li>
</ul>
<h2 id="failure-isolation"><strong>Failure Isolation</strong><a class="headerlink" href="#failure-isolation" title="Permanent link">¶</a></h2>
<ul>
<li>What happens when that request fails?</li>
<li>What is our average response time on that request?</li>
<li>What would our support team change about the user experience?</li>
</ul>
<p>The microservices architecture moves application logic to services and uses a network layer to communicate between them. Communicating over a network instead of in-memory calls brings extra latency and complexity to the system which requires cooperation between multiple physical and logical components. The increased complexity of the distributed system leads to a higher chance of particular <strong>network failures.</strong></p>
<p>One of the biggest advantage of a microservices architecture over a monolithic one is that teams can independently design, develop and deploy their services. They have full ownership over their service’s lifecycle. It also means that teams have no control over their service dependencies as it’s more likely managed by a different team. With a microservices architecture, we need to keep in mind that provider <strong>services can be temporarily unavailable</strong> by broken releases, configurations, and other changes as they are controlled by someone else and components move independently from each other.</p>
<p>Strategies: </p>
<ul>
<li><strong>Automatic Rollouts</strong></li>
</ul>
<p>In a microservices architecture, services depend on each other. This is why you should minimize failures and limit their negative effect. To deal with issues from changes, you can implement change management strategies and <strong>automatic rollouts</strong>.</p>
<p>For example, when you deploy new code, or you change some configuration, you should apply these changes to a subset of your instances gradually, monitor them and even automatically revert the deployment if you see that it has a negative effect on your key metrics.</p>
<p>Another solution could be that you run two production environments. You always deploy to only one of them, and you only point your load balancer to the new one after you verified that the new version works as it is expected. This is called blue-green, or red-black deployment.</p>
<ul>
<li><strong>Health-check and Load balancing</strong></li>
</ul>
<p>Instances continuously start, restart and stop because of failures, deployments or autoscaling. It makes them temporarily or permanently unavailable. To avoid issues, your load balancer should <strong>skip unhealthy instances</strong> from the routing as they cannot serve your customers’ or sub-systems’ need.</p>
<p>Application instance health can be determined via external observation. You can do it with repeatedly calling a <code>GET /health</code> endpoint or via self-reporting. Modern <strong>service discovery</strong> solutions continuously collect health information from instances and configure the load-balancer to route traffic only to healthy components.</p>
<p>more:</p>
<ul>
<li><a href="https://blog.risingstack.com/designing-microservices-architecture-for-failure/">designing-microservices-architecture-for-failure</a></li>
</ul>
</article>
</div>
<script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": ["tabs", "content.tabs.link"], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../assets/javascripts/bundle.51198bba.min.js"></script>
<script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>